
const app = {


	songs: [

		{
			name: "Click Pow Get Down",
			singer: "Raftaar x Fortnite",
			path: "../music/cafe1.mp3",
			image: "https://i.ytimg.com/vi/jTLhQf5KJSc/maxresdefault.jpg"
		},

		{
			name: "Tu Phir Se Aana",
			singer: "Raftaar x Salim Merchant x Karma",
			path: "../music/cafe2.mp3",
			image: "https://1.bp.blogspot.com/-kX21dGUuTdM/X85ij1SBeEI/AAAAAAAAKK4/feboCtDKkls19cZw3glZWRdJ6J8alCm-gCNcBGAsYHQ/s16000/Tu%2BAana%2BPhir%2BSe%2BRap%2BSong%2BLyrics%2BBy%2BRaftaar.jpg"
		},
		{
			name: "Naachne Ka Shaunq",
			singer: "Raftaar x Brobha V",
			path: "../music/cafe3.mp3",
			image: "https://i.ytimg.com/vi/QvswgfLDuPg/maxresdefault.jpg"
		},

		{
			name: "Click Pow Get Down",
			singer: "Raftaar x Fortnite",
			path: "https://mp3.vlcmusic.com/download.php?track_id=34737&format=320",
			image: "https://i.ytimg.com/vi/jTLhQf5KJSc/maxresdefault.jpg"
		},

		{
			name: "Tu Phir Se Aana",
			singer: "Raftaar x Salim Merchant x Karma",
			path: "https://mp3.vlcmusic.com/download.php?track_id=34213&format=320",
			image:
				"https://1.bp.blogspot.com/-kX21dGUuTdM/X85ij1SBeEI/AAAAAAAAKK4/feboCtDKkls19cZw3glZWRdJ6J8alCm-gCNcBGAsYHQ/s16000/Tu%2BAana%2BPhir%2BSe%2BRap%2BSong%2BLyrics%2BBy%2BRaftaar.jpg"
		},
		{
			name: "Naachne Ka Shaunq",
			singer: "Raftaar x Brobha V",
			path:
				"https://mp3.filmysongs.in/download.php?id=Naachne Ka Shaunq Raftaar Ft Brodha V Mp3 Hindi Song Filmysongs.co.mp3",
			image: "https://i.ytimg.com/vi/QvswgfLDuPg/maxresdefault.jpg"
		},
		{
			name: "Mantoiyat",
			singer: "Raftaar x Nawazuddin Siddiqui",
			path: "https://mp3.vlcmusic.com/download.php?track_id=14448&format=320",
			image:
				"https://a10.gaanacdn.com/images/song/39/24225939/crop_480x480_1536749130.jpg"
		},
		{
			name: "Aage Chal",
			singer: "Raftaar",
			path: "https://mp3.vlcmusic.com/download.php?track_id=25791&format=320",
			image:
				"https://a10.gaanacdn.com/images/albums/72/3019572/crop_480x480_3019572.jpg"
		},
		{
			name: "Damn",
			singer: "Raftaar x kr$na",
			path:
				"https://mp3.filmisongs.com/go.php?id=Damn%20Song%20Raftaar%20Ft%20KrSNa.mp3",
			image:
				"https://filmisongs.xyz/wp-content/uploads/2020/07/Damn-Song-Raftaar-KrNa.jpg"
		},
		{
			name: "Feeling You",
			singer: "Raftaar x Harjas",
			path: "https://mp3.vlcmusic.com/download.php?track_id=27145&format=320",
			image:
				"https://a10.gaanacdn.com/gn_img/albums/YoEWlabzXB/oEWlj5gYKz/size_xxl_1586752323.webp"
		},

		{
			name: "Click Pow Get Down",
			singer: "Raftaar x Fortnite",
			path: "https://mp3.vlcmusic.com/download.php?track_id=34737&format=320",
			image: "https://i.ytimg.com/vi/jTLhQf5KJSc/maxresdefault.jpg"
		},

		{
			name: "Tu Phir Se Aana",
			singer: "Raftaar x Salim Merchant x Karma",
			path: "https://mp3.vlcmusic.com/download.php?track_id=34213&format=320",
			image:
				"https://1.bp.blogspot.com/-kX21dGUuTdM/X85ij1SBeEI/AAAAAAAAKK4/feboCtDKkls19cZw3glZWRdJ6J8alCm-gCNcBGAsYHQ/s16000/Tu%2BAana%2BPhir%2BSe%2BRap%2BSong%2BLyrics%2BBy%2BRaftaar.jpg"
		},
		{
			name: "Naachne Ka Shaunq",
			singer: "Raftaar x Brobha V",
			path:
				"https://mp3.filmysongs.in/download.php?id=Naachne Ka Shaunq Raftaar Ft Brodha V Mp3 Hindi Song Filmysongs.co.mp3",
			image: "https://i.ytimg.com/vi/QvswgfLDuPg/maxresdefault.jpg"
		},
		{
			name: "Mantoiyat",
			singer: "Raftaar x Nawazuddin Siddiqui",
			path: "https://mp3.vlcmusic.com/download.php?track_id=14448&format=320",
			image:
				"https://a10.gaanacdn.com/images/song/39/24225939/crop_480x480_1536749130.jpg"
		},
		{
			name: "Aage Chal",
			singer: "Raftaar",
			path: "https://mp3.vlcmusic.com/download.php?track_id=25791&format=320",
			image:
				"https://a10.gaanacdn.com/images/albums/72/3019572/crop_480x480_3019572.jpg"
		},
		{
			name: "Damn",
			singer: "Raftaar x kr$na",
			path:
				"https://mp3.filmisongs.com/go.php?id=Damn%20Song%20Raftaar%20Ft%20KrSNa.mp3",
			image:
				"https://filmisongs.xyz/wp-content/uploads/2020/07/Damn-Song-Raftaar-KrNa.jpg"
		},
		{
			name: "Feeling You",
			singer: "Raftaar x Harjas",
			path: "https://mp3.vlcmusic.com/download.php?track_id=27145&format=320",
			image:
				"https://a10.gaanacdn.com/gn_img/albums/YoEWlabzXB/oEWlj5gYKz/size_xxl_1586752323.webp"
		}
	],


	currentIndex	: 0,
	
	get 	currentSong(){
		
		return 		this.songs[this.currentIndex];		
		
	},
	
	
	isPlaying	:	false,
		
	cdThumbAnimate	:		cdThumb.animate(
			
		[{ transform : "rotate(360deg)" }]  , 
		
		{		
			duration		: 10000,			// 10 seconds
		
			iterations		: Infinity,		
			
			delay			: 500,
		}
	),
	
	
	isRepeat	:	false,
	
	isRandom	:	false,
	
	
	
	
	render			: function () {
				
		
		this.loadCurrentSong();	
		
		
		if(app.isPlaying)		audio.play();
		
		
		audio.onplay 	=	 function () {
			
			console.log('on playing ');
			
			app.isPlaying	=	true;
			
			player.classList.add("playing");
			
			app.cdThumbAnimate.play();			
		};
		
		
		audio.onpause 	=	 function () {

			console.log('paussing ');
			
			app.isPlaying	=	false;
			
			player.classList.remove("playing");

			app.cdThumbAnimate.pause();			
		};
		
		
		
		const htmls		= 	this.songs.map(  (song , index)		=> {

			return `
        
				<div	class		= "song ${	index === this.currentIndex		?	 "active"	:	""	}"	
				
						data-index	= "${index}" >

					<div 	class	="thumb"
					
							style	="background-image: url(${song.image})" >
					</div>
					
					
					<div 	class="body">
						
						<h3 class="title">	${song.name}	</h3>
						
						<p class="author">	${song.singer}	</p>
						
					</div>
					
					
					<div 	class ="option">
					
						<i class ="fas fa-ellipsis-h"></i>
					</div>
				</div>
			`;
		});

		playlist.innerHTML 		=	 htmls.join("");		
		
	},	
	
	


	
	
	handleEvents	: function () {	
					
		
		const cdWidth			= cd.offsetWidth;
		
		
		document.onscroll		= function () {

			const scrollTop		= window.scrollY	||	 document.documentElement.scrollTop;

			const newCdWidth	= cdWidth - scrollTop;

			cd.style.width		= newCdWidth > 0	?	 newCdWidth + "px"		:	 0;

			cd.style.opacity	= newCdWidth / cdWidth;
		};

		
		prevBtn.onclick			=	 function () {			
	
			app.prevSong();
			
			app.render();
			
		};


		playBtn.onclick			=	 function (e) {
			
			app.isPlaying 		=	!app.isPlaying;
			
			if (app.isPlaying) {	
				
				audio.play();		
			} 
			else {								
				
				audio.pause();							
			}		
			
		};
		
		
		nextBtn.onclick 	=	 function () {
			
			app.nextSong();
			
			app.render();
			
		};

				

		repeatBtn.onclick		=	 function (e) {			

			app.isRepeat		=	 !app.isRepeat;		
			
			repeatBtn.classList.toggle( "active"  ,  app.isRepeat );
		};



		randomBtn.onclick 		=	 function (e) {
			
			app.isRandom 		=	 !app.isRandom;		
			
			randomBtn.classList.toggle("active", app.isRandom);			
		};
		

		playlist.onclick 		=	 function (e) {
			
			const songNode 		=	 e.target.closest(".song:not(.active)");

			if (songNode || e.target.closest(".option")) {
				
				// Handle when clicking on the song
				
				if (songNode) {
					
					app.currentIndex 	=	 Number(songNode.dataset.index);
					
					app.render();
					
				}

				// Handle when clicking on the song option
				if (e.target.closest(".option")) {

				}
			}
		};	
	},
	
	

	
	
	loadCurrentSong		: function () {
	
		heading.textContent 			= this.currentSong.name;
		
		cdThumb.style.backgroundImage 	= `url('${this.currentSong.image}')`;
		
		audio.src 						= this.currentSong.path;	
		
		app.scrollToActiveSong();
	},
	
	
	nextSong			: function () {

		this.currentIndex++ ;
		
		if (this.currentIndex >= this.songs.length) {
		
			this.currentIndex   =   0;
		}
	},
	
	prevSong			: function () {
		
		this.currentIndex-- ;
		
		if (this.currentIndex < 0) {
		
			this.currentIndex 	=	 this.songs.length - 1;
		}
	},
	
	
	
	scrollToActiveSong		: function () {
		
		setTimeout(() => {
		
			$(".song.active").scrollIntoView({
				
				behavior	: "smooth",
				block		: "nearest"
			});
			
		}, 		100);
	},
	

	
	
	
	start		: function () {

		this.cdThumbAnimate.pause();

		this.render();
		
		// Lắng nghe / xử lý các sự kiện (DOM events)
		// Listening / handling events (DOM events)
		
		this.handleEvents();

	}
};


app.start();